<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/itew3_midterm_case_study/ui/screens/ReportsScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/itew3_midterm_case_study/ui/screens/ReportsScreen.kt" />
              <option name="originalContent" value="package com.example.itew3_midterm_case_study.ui.screens&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.unit.dp&#10;import com.example.itew3_midterm_case_study.data.entities.StudentEntity&#10;import com.example.itew3_midterm_case_study.ui.viewmodel.AttendanceViewModel&#10;import com.example.itew3_midterm_case_study.ui.viewmodel.StudentViewModel&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack // Correct import&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ReportsScreen(&#10;    classId: Int,&#10;    className: String,&#10;    studentViewModel: StudentViewModel,&#10;    attendanceViewModel: AttendanceViewModel,&#10;    onNavigateBack: () -&gt; Unit&#10;) {&#10;    val students by studentViewModel.getStudentsByClass(classId).collectAsState(initial = emptyList())&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Attendance Report - $className&quot;) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, &quot;Back&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    ) { padding -&gt;&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(padding)&#10;                .padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            items(students) { student -&gt;&#10;                StudentAttendanceCard(&#10;                    student = student,&#10;                    attendanceViewModel = attendanceViewModel&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StudentAttendanceCard(&#10;    student: StudentEntity,&#10;    attendanceViewModel: AttendanceViewModel&#10;) {&#10;    var stats by remember { mutableStateOf&lt;com.example.itew3_midterm_case_study.ui.viewmodel.AttendanceStats?&gt;(null) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    LaunchedEffect(student.id) {&#10;        scope.launch {&#10;            stats = attendanceViewModel.calculateAttendanceStats(student.id)&#10;        }&#10;    }&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            Text(&#10;                text = student.studentName,&#10;                style = MaterialTheme.typography.titleMedium&#10;            )&#10;            Text(&#10;                text = &quot;ID: ${student.studentIdNumber}&quot;,&#10;                style = MaterialTheme.typography.bodySmall,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            stats?.let { s -&gt;&#10;                // Attendance percentage&#10;                LinearProgressIndicator(&#10;                    progress = { s.percentage / 100f },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(8.dp),&#10;                    color = when {&#10;                        s.percentage &gt;= 75 -&gt; Color(0xFF4CAF50)&#10;                        s.percentage &gt;= 50 -&gt; Color(0xFFFF9800)&#10;                        else -&gt; Color(0xFFF44336)&#10;                    },&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                Text(&#10;                    text = &quot;Attendance: ${&quot;%.1f&quot;.format(s.percentage)}%&quot;,&#10;                    style = MaterialTheme.typography.titleSmall&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween&#10;                ) {&#10;                    StatChip(&quot;Present: ${s.present}&quot;, Color(0xFF4CAF50))&#10;                    StatChip(&quot;Absent: ${s.absent}&quot;, Color(0xFFF44336))&#10;                    StatChip(&quot;Late: ${s.late}&quot;, Color(0xFFFF9800))&#10;                }&#10;&#10;                Text(&#10;                    text = &quot;Total Days: ${s.total}&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    modifier = Modifier.padding(top = 4.dp)&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatChip(text: String, color: Color) {&#10;    Surface(&#10;        color = color.copy(alpha = 0.2f),&#10;        shape = MaterialTheme.shapes.small&#10;    ) {&#10;        Text(&#10;            text = text,&#10;            modifier = Modifier.padding(horizontal = 8.dp, vertical = 4.dp),&#10;            style = MaterialTheme.typography.bodySmall,&#10;            color = color&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.itew3_midterm_case_study.ui.screens&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.unit.dp&#10;import com.example.itew3_midterm_case_study.data.entities.StudentEntity&#10;import com.example.itew3_midterm_case_study.ui.viewmodel.AttendanceViewModel&#10;import com.example.itew3_midterm_case_study.ui.viewmodel.StudentViewModel&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.FilterList&#10;import androidx.compose.material.icons.filled.CalendarToday&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.text.font.FontWeight&#10;import kotlinx.coroutines.launch&#10;import org.threeten.bp.LocalDate&#10;import org.threeten.bp.format.DateTimeFormatter&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ReportsScreen(&#10;    classId: Int,&#10;    className: String,&#10;    studentViewModel: StudentViewModel,&#10;    attendanceViewModel: AttendanceViewModel,&#10;    onNavigateBack: () -&gt; Unit&#10;) {&#10;    val students by studentViewModel.getStudentsByClass(classId).collectAsState(initial = emptyList())&#10;    var showDateFilter by remember { mutableStateOf(false) }&#10;    var startDate by remember { mutableStateOf&lt;LocalDate?&gt;(null) }&#10;    var endDate by remember { mutableStateOf&lt;LocalDate?&gt;(null) }&#10;    var isFilterActive by remember { mutableStateOf(false) }&#10;    val dateFormatter = remember { DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;) }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Attendance Report - $className&quot;) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, &quot;Back&quot;)&#10;                    }&#10;                },&#10;                actions = {&#10;                    IconButton(onClick = { showDateFilter = !showDateFilter }) {&#10;                        Icon(Icons.Default.FilterList, &quot;Filter by Date&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    ) { padding -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(padding)&#10;        ) {&#10;            // Date Filter Section&#10;            if (showDateFilter) {&#10;                DateFilterCard(&#10;                    startDate = startDate,&#10;                    endDate = endDate,&#10;                    onStartDateChange = { startDate = it },&#10;                    onEndDateChange = { endDate = it },&#10;                    onApplyFilter = {&#10;                        isFilterActive = startDate != null &amp;&amp; endDate != null&#10;                        showDateFilter = false&#10;                    },&#10;                    onClearFilter = {&#10;                        startDate = null&#10;                        endDate = null&#10;                        isFilterActive = false&#10;                        showDateFilter = false&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Active Filter Display&#10;            if (isFilterActive &amp;&amp; startDate != null &amp;&amp; endDate != null) {&#10;                ActiveFilterChip(&#10;                    startDate = startDate!!,&#10;                    endDate = endDate!!,&#10;                    onClear = {&#10;                        startDate = null&#10;                        endDate = null&#10;                        isFilterActive = false&#10;                    }&#10;                )&#10;            }&#10;&#10;            LazyColumn(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(16.dp),&#10;                verticalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                items(students) { student -&gt;&#10;                    StudentAttendanceCard(&#10;                        student = student,&#10;                        attendanceViewModel = attendanceViewModel,&#10;                        startDate = if (isFilterActive) startDate?.format(dateFormatter) else null,&#10;                        endDate = if (isFilterActive) endDate?.format(dateFormatter) else null&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StudentAttendanceCard(&#10;    student: StudentEntity,&#10;    attendanceViewModel: AttendanceViewModel,&#10;    startDate: String? = null,&#10;    endDate: String? = null&#10;) {&#10;    var stats by remember { mutableStateOf&lt;com.example.itew3_midterm_case_study.ui.viewmodel.AttendanceStats?&gt;(null) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    LaunchedEffect(student.id, startDate, endDate) {&#10;        scope.launch {&#10;            stats = if (startDate != null &amp;&amp; endDate != null) {&#10;                attendanceViewModel.calculateAttendanceStatsByDateRange(student.id, startDate, endDate)&#10;            } else {&#10;                attendanceViewModel.calculateAttendanceStats(student.id)&#10;            }&#10;        }&#10;    }&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            Text(&#10;                text = student.studentName,&#10;                style = MaterialTheme.typography.titleMedium&#10;            )&#10;            Text(&#10;                text = &quot;ID: ${student.studentIdNumber}&quot;,&#10;                style = MaterialTheme.typography.bodySmall,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            stats?.let { s -&gt;&#10;                // Attendance percentage&#10;                LinearProgressIndicator(&#10;                    progress = { s.percentage / 100f },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(8.dp),&#10;                    color = when {&#10;                        s.percentage &gt;= 75 -&gt; Color(0xFF4CAF50)&#10;                        s.percentage &gt;= 50 -&gt; Color(0xFFFF9800)&#10;                        else -&gt; Color(0xFFF44336)&#10;                    },&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                Text(&#10;                    text = &quot;Attendance: ${&quot;%.1f&quot;.format(s.percentage)}%&quot;,&#10;                    style = MaterialTheme.typography.titleSmall&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween&#10;                ) {&#10;                    StatChip(&quot;Present: ${s.present}&quot;, Color(0xFF4CAF50))&#10;                    StatChip(&quot;Absent: ${s.absent}&quot;, Color(0xFFF44336))&#10;                    StatChip(&quot;Late: ${s.late}&quot;, Color(0xFFFF9800))&#10;                }&#10;&#10;                Text(&#10;                    text = &quot;Total Days: ${s.total}&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    modifier = Modifier.padding(top = 4.dp)&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatChip(text: String, color: Color) {&#10;    Surface(&#10;        color = color.copy(alpha = 0.2f),&#10;        shape = MaterialTheme.shapes.small&#10;    ) {&#10;        Text(&#10;            text = text,&#10;            modifier = Modifier.padding(horizontal = 8.dp, vertical = 4.dp),&#10;            style = MaterialTheme.typography.bodySmall,&#10;            color = color&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun DateFilterCard(&#10;    startDate: LocalDate?,&#10;    endDate: LocalDate?,&#10;    onStartDateChange: (LocalDate?) -&gt; Unit,&#10;    onEndDateChange: (LocalDate?) -&gt; Unit,&#10;    onApplyFilter: () -&gt; Unit,&#10;    onClearFilter: () -&gt; Unit&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.secondaryContainer&#10;        )&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            Text(&#10;                text = &quot;Filter by Date Range&quot;,&#10;                style = MaterialTheme.typography.titleMedium,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;&#10;            // Start Date Picker&#10;            DatePickerField(&#10;                label = &quot;Start Date&quot;,&#10;                selectedDate = startDate,&#10;                onDateSelected = onStartDateChange&#10;            )&#10;&#10;            // End Date Picker&#10;            DatePickerField(&#10;                label = &quot;End Date&quot;,&#10;                selectedDate = endDate,&#10;                onDateSelected = onEndDateChange&#10;            )&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;            ) {&#10;                OutlinedButton(&#10;                    onClick = onClearFilter,&#10;                    modifier = Modifier.weight(1f)&#10;                ) {&#10;                    Text(&quot;Clear&quot;)&#10;                }&#10;                Button(&#10;                    onClick = onApplyFilter,&#10;                    modifier = Modifier.weight(1f),&#10;                    enabled = startDate != null &amp;&amp; endDate != null&#10;                ) {&#10;                    Text(&quot;Apply Filter&quot;)&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun DatePickerField(&#10;    label: String,&#10;    selectedDate: LocalDate?,&#10;    onDateSelected: (LocalDate?) -&gt; Unit&#10;) {&#10;    var showDatePicker by remember { mutableStateOf(false) }&#10;    val dateFormatter = remember { DateTimeFormatter.ofPattern(&quot;MMM dd, yyyy&quot;) }&#10;&#10;    OutlinedButton(&#10;        onClick = { showDatePicker = true },&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Column {&#10;                Text(&#10;                    text = label,&#10;                    style = MaterialTheme.typography.labelSmall&#10;                )&#10;                Text(&#10;                    text = selectedDate?.format(dateFormatter) ?: &quot;Select Date&quot;,&#10;                    style = MaterialTheme.typography.bodyMedium&#10;                )&#10;            }&#10;            Icon(Icons.Default.CalendarToday, contentDescription = null)&#10;        }&#10;    }&#10;&#10;    if (showDatePicker) {&#10;        SimpleDatePickerDialog(&#10;            onDateSelected = { date -&gt;&#10;                onDateSelected(date)&#10;                showDatePicker = false&#10;            },&#10;            onDismiss = { showDatePicker = false }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun SimpleDatePickerDialog(&#10;    onDateSelected: (LocalDate) -&gt; Unit,&#10;    onDismiss: () -&gt; Unit&#10;) {&#10;    var selectedYear by remember { mutableIntStateOf(LocalDate.now().year) }&#10;    var selectedMonth by remember { mutableIntStateOf(LocalDate.now().monthValue) }&#10;    var selectedDay by remember { mutableIntStateOf(LocalDate.now().dayOfMonth) }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(&quot;Select Date&quot;) },&#10;        text = {&#10;            Column(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                verticalArrangement = Arrangement.spacedBy(8.dp)&#10;            ) {&#10;                // Year Selector&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&quot;Year:&quot;)&#10;                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                        OutlinedButton(onClick = { selectedYear-- }) { Text(&quot;-&quot;) }&#10;                        Text(&#10;                            text = selectedYear.toString(),&#10;                            style = MaterialTheme.typography.titleMedium,&#10;                            modifier = Modifier.padding(horizontal = 16.dp)&#10;                        )&#10;                        OutlinedButton(onClick = { selectedYear++ }) { Text(&quot;+&quot;) }&#10;                    }&#10;                }&#10;&#10;                // Month Selector&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&quot;Month:&quot;)&#10;                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                        OutlinedButton(onClick = { &#10;                            selectedMonth = if (selectedMonth &gt; 1) selectedMonth - 1 else 12 &#10;                        }) { Text(&quot;-&quot;) }&#10;                        Text(&#10;                            text = selectedMonth.toString(),&#10;                            style = MaterialTheme.typography.titleMedium,&#10;                            modifier = Modifier.padding(horizontal = 16.dp)&#10;                        )&#10;                        OutlinedButton(onClick = { &#10;                            selectedMonth = if (selectedMonth &lt; 12) selectedMonth + 1 else 1 &#10;                        }) { Text(&quot;+&quot;) }&#10;                    }&#10;                }&#10;&#10;                // Day Selector&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&quot;Day:&quot;)&#10;                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                        OutlinedButton(onClick = { &#10;                            selectedDay = if (selectedDay &gt; 1) selectedDay - 1 else 31 &#10;                        }) { Text(&quot;-&quot;) }&#10;                        Text(&#10;                            text = selectedDay.toString(),&#10;                            style = MaterialTheme.typography.titleMedium,&#10;                            modifier = Modifier.padding(horizontal = 16.dp)&#10;                        )&#10;                        OutlinedButton(onClick = { &#10;                            selectedDay = if (selectedDay &lt; 31) selectedDay + 1 else 1 &#10;                        }) { Text(&quot;+&quot;) }&#10;                    }&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            Button(onClick = {&#10;                try {&#10;                    val date = LocalDate.of(selectedYear, selectedMonth, selectedDay)&#10;                    onDateSelected(date)&#10;                } catch (_: Exception) {&#10;                    // Invalid date, do nothing&#10;                }&#10;            }) {&#10;                Text(&quot;OK&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(onClick = onDismiss) {&#10;                Text(&quot;Cancel&quot;)&#10;            }&#10;        }&#10;    )&#10;}&#10;&#10;@Composable&#10;fun ActiveFilterChip(&#10;    startDate: LocalDate,&#10;    endDate: LocalDate,&#10;    onClear: () -&gt; Unit&#10;) {&#10;    val dateFormatter = remember { DateTimeFormatter.ofPattern(&quot;MMM dd, yyyy&quot;) }&#10;    &#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(horizontal = 16.dp, vertical = 8.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.primaryContainer&#10;        )&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(12.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Icon(&#10;                    Icons.Default.FilterList,&#10;                    contentDescription = null,&#10;                    tint = MaterialTheme.colorScheme.onPrimaryContainer&#10;                )&#10;                Column {&#10;                    Text(&#10;                        text = &quot;Filtered by Date Range&quot;,&#10;                        style = MaterialTheme.typography.labelSmall,&#10;                        color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                    )&#10;                    Text(&#10;                        text = &quot;${startDate.format(dateFormatter)} - ${endDate.format(dateFormatter)}&quot;,&#10;                        style = MaterialTheme.typography.bodyMedium,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                    )&#10;                }&#10;            }&#10;            TextButton(onClick = onClear) {&#10;                Text(&quot;Clear&quot;)&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/itew3_midterm_case_study/ui/viewmodel/AttendanceViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/itew3_midterm_case_study/ui/viewmodel/AttendanceViewModel.kt" />
              <option name="originalContent" value="package com.example.itew3_midterm_case_study.ui.viewmodel&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.itew3_midterm_case_study.data.entities.AttendanceEntity&#10;import com.example.itew3_midterm_case_study.data.repository.AttendanceRepository&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.launch&#10;&#10;class AttendanceViewModel(private val repository: AttendanceRepository) : ViewModel() {&#10;&#10;    fun markAttendance(studentId: Int, date: String, status: String) {&#10;        viewModelScope.launch {&#10;            val attendance = AttendanceEntity(&#10;                studentId = studentId,&#10;                date = date,&#10;                status = status&#10;            )&#10;            repository.insert(attendance)&#10;        }&#10;    }&#10;&#10;    suspend fun getAttendance(studentId: Int, date: String): AttendanceEntity? {&#10;        return repository.getAttendance(studentId, date)&#10;    }&#10;&#10;    fun getAttendanceByDate(date: String, classId: Int): Flow&lt;List&lt;AttendanceEntity&gt;&gt; {&#10;        return repository.getAttendanceByDate(date, classId)&#10;    }&#10;&#10;    fun getAttendanceByStudent(studentId: Int): Flow&lt;List&lt;AttendanceEntity&gt;&gt; {&#10;        return repository.getAttendanceByStudent(studentId)&#10;    }&#10;&#10;    suspend fun calculateAttendanceStats(studentId: Int): AttendanceStats {&#10;        val present = repository.getAttendanceCountByStatus(studentId, &quot;Present&quot;)&#10;        val absent = repository.getAttendanceCountByStatus(studentId, &quot;Absent&quot;)&#10;        val late = repository.getAttendanceCountByStatus(studentId, &quot;Late&quot;)&#10;        val total = present + absent + late&#10;        val percentage = if (total &gt; 0) ((present + late).toFloat() / total * 100) else 0f&#10;&#10;        return AttendanceStats(present, absent, late, total, percentage)&#10;    }&#10;}&#10;&#10;data class AttendanceStats(&#10;    val present: Int,&#10;    val absent: Int,&#10;    val late: Int,&#10;    val total: Int,&#10;    val percentage: Float&#10;)" />
              <option name="updatedContent" value="package com.example.itew3_midterm_case_study.ui.viewmodel&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.itew3_midterm_case_study.data.entities.AttendanceEntity&#10;import com.example.itew3_midterm_case_study.data.repository.AttendanceRepository&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.launch&#10;&#10;class AttendanceViewModel(private val repository: AttendanceRepository) : ViewModel() {&#10;&#10;    fun markAttendance(studentId: Int, date: String, status: String) {&#10;        viewModelScope.launch {&#10;            val attendance = AttendanceEntity(&#10;                studentId = studentId,&#10;                date = date,&#10;                status = status&#10;            )&#10;            repository.insert(attendance)&#10;        }&#10;    }&#10;&#10;    suspend fun getAttendance(studentId: Int, date: String): AttendanceEntity? {&#10;        return repository.getAttendance(studentId, date)&#10;    }&#10;&#10;    fun getAttendanceByDate(date: String, classId: Int): Flow&lt;List&lt;AttendanceEntity&gt;&gt; {&#10;        return repository.getAttendanceByDate(date, classId)&#10;    }&#10;&#10;    fun getAttendanceByStudent(studentId: Int): Flow&lt;List&lt;AttendanceEntity&gt;&gt; {&#10;        return repository.getAttendanceByStudent(studentId)&#10;    }&#10;&#10;    suspend fun calculateAttendanceStats(studentId: Int): AttendanceStats {&#10;        val present = repository.getAttendanceCountByStatus(studentId, &quot;Present&quot;)&#10;        val absent = repository.getAttendanceCountByStatus(studentId, &quot;Absent&quot;)&#10;        val late = repository.getAttendanceCountByStatus(studentId, &quot;Late&quot;)&#10;        val total = present + absent + late&#10;        val percentage = if (total &gt; 0) ((present + late).toFloat() / total * 100) else 0f&#10;&#10;        return AttendanceStats(present, absent, late, total, percentage)&#10;    }&#10;&#10;    suspend fun calculateAttendanceStatsByDateRange(&#10;        studentId: Int,&#10;        startDate: String,&#10;        endDate: String&#10;    ): AttendanceStats {&#10;        val attendanceList = repository.getAttendanceByDateRange(studentId, startDate, endDate)&#10;        val present = attendanceList.count { it.status == &quot;Present&quot; }&#10;        val absent = attendanceList.count { it.status == &quot;Absent&quot; }&#10;        val late = attendanceList.count { it.status == &quot;Late&quot; }&#10;        val total = attendanceList.size&#10;        val percentage = if (total &gt; 0) ((present + late).toFloat() / total * 100) else 0f&#10;&#10;        return AttendanceStats(present, absent, late, total, percentage)&#10;    }&#10;&#10;    suspend fun getAttendanceByDateRange(&#10;        studentId: Int,&#10;        startDate: String,&#10;        endDate: String&#10;    ): List&lt;AttendanceEntity&gt; {&#10;        return repository.getAttendanceByDateRange(studentId, startDate, endDate)&#10;    }&#10;}&#10;&#10;data class AttendanceStats(&#10;    val present: Int,&#10;    val absent: Int,&#10;    val late: Int,&#10;    val total: Int,&#10;    val percentage: Float&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/gradle/libs.versions.toml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/gradle/libs.versions.toml" />
              <option name="originalContent" value="[versions]&#10;agp = &quot;8.13.0&quot;&#10;kotlin = &quot;2.0.21&quot;&#10;coreKtx = &quot;1.10.1&quot;&#10;junit = &quot;4.13.2&quot;&#10;junitVersion = &quot;1.1.5&quot;&#10;espressoCore = &quot;3.5.1&quot;&#10;lifecycleRuntimeKtx = &quot;2.6.1&quot;&#10;activityCompose = &quot;1.8.0&quot;&#10;composeBom = &quot;2024.09.00&quot;&#10;&#10;[libraries]&#10;androidx-core-ktx = { group = &quot;androidx.core&quot;, name = &quot;core-ktx&quot;, version.ref = &quot;coreKtx&quot; }&#10;junit = { group = &quot;junit&quot;, name = &quot;junit&quot;, version.ref = &quot;junit&quot; }&#10;androidx-junit = { group = &quot;androidx.test.ext&quot;, name = &quot;junit&quot;, version.ref = &quot;junitVersion&quot; }&#10;androidx-espresso-core = { group = &quot;androidx.test.espresso&quot;, name = &quot;espresso-core&quot;, version.ref = &quot;espressoCore&quot; }&#10;androidx-lifecycle-runtime-ktx = { group = &quot;androidx.lifecycle&quot;, name = &quot;lifecycle-runtime-ktx&quot;, version.ref = &quot;lifecycleRuntimeKtx&quot; }&#10;androidx-activity-compose = { group = &quot;androidx.activity&quot;, name = &quot;activity-compose&quot;, version.ref = &quot;activityCompose&quot; }&#10;androidx-compose-bom = { group = &quot;androidx.compose&quot;, name = &quot;compose-bom&quot;, version.ref = &quot;composeBom&quot; }&#10;androidx-compose-ui = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui&quot; }&#10;androidx-compose-ui-graphics = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-graphics&quot; }&#10;androidx-compose-ui-tooling = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling&quot; }&#10;androidx-compose-ui-tooling-preview = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling-preview&quot; }&#10;androidx-compose-ui-test-manifest = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-manifest&quot; }&#10;androidx-compose-ui-test-junit4 = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-junit4&quot; }&#10;androidx-compose-material3 = { group = &quot;androidx.compose.material3&quot;, name = &quot;material3&quot; }&#10;&#10;[plugins]&#10;android-application = { id = &quot;com.android.application&quot;, version.ref = &quot;agp&quot; }&#10;kotlin-android = { id = &quot;org.jetbrains.kotlin.android&quot;, version.ref = &quot;kotlin&quot; }&#10;kotlin-compose = { id = &quot;org.jetbrains.kotlin.plugin.compose&quot;, version.ref = &quot;kotlin&quot; }&#10;ksp = { id = &quot;com.google.devtools.ksp&quot;, version = &quot;1.9.0-1.0.13&quot; }&#10;" />
              <option name="updatedContent" value="[versions]&#10;agp = &quot;8.13.0&quot;&#10;kotlin = &quot;2.0.21&quot;&#10;coreKtx = &quot;1.10.1&quot;&#10;junit = &quot;4.13.2&quot;&#10;junitVersion = &quot;1.1.5&quot;&#10;espressoCore = &quot;3.5.1&quot;&#10;lifecycleRuntimeKtx = &quot;2.6.1&quot;&#10;activityCompose = &quot;1.8.0&quot;&#10;composeBom = &quot;2024.09.00&quot;&#10;&#10;[libraries]&#10;androidx-core-ktx = { group = &quot;androidx.core&quot;, name = &quot;core-ktx&quot;, version.ref = &quot;coreKtx&quot; }&#10;junit = { group = &quot;junit&quot;, name = &quot;junit&quot;, version.ref = &quot;junit&quot; }&#10;androidx-junit = { group = &quot;androidx.test.ext&quot;, name = &quot;junit&quot;, version.ref = &quot;junitVersion&quot; }&#10;androidx-espresso-core = { group = &quot;androidx.test.espresso&quot;, name = &quot;espresso-core&quot;, version.ref = &quot;espressoCore&quot; }&#10;androidx-lifecycle-runtime-ktx = { group = &quot;androidx.lifecycle&quot;, name = &quot;lifecycle-runtime-ktx&quot;, version.ref = &quot;lifecycleRuntimeKtx&quot; }&#10;androidx-activity-compose = { group = &quot;androidx.activity&quot;, name = &quot;activity-compose&quot;, version.ref = &quot;activityCompose&quot; }&#10;androidx-compose-bom = { group = &quot;androidx.compose&quot;, name = &quot;compose-bom&quot;, version.ref = &quot;composeBom&quot; }&#10;androidx-compose-ui = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui&quot; }&#10;androidx-compose-ui-graphics = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-graphics&quot; }&#10;androidx-compose-ui-tooling = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling&quot; }&#10;androidx-compose-ui-tooling-preview = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling-preview&quot; }&#10;androidx-compose-ui-test-manifest = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-manifest&quot; }&#10;androidx-compose-ui-test-junit4 = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-junit4&quot; }&#10;androidx-compose-material3 = { group = &quot;androidx.compose.material3&quot;, name = &quot;material3&quot; }&#10;&#10;[plugins]&#10;android-application = { id = &quot;com.android.application&quot;, version.ref = &quot;agp&quot; }&#10;kotlin-android = { id = &quot;org.jetbrains.kotlin.android&quot;, version.ref = &quot;kotlin&quot; }&#10;kotlin-compose = { id = &quot;org.jetbrains.kotlin.plugin.compose&quot;, version.ref = &quot;kotlin&quot; }&#10;ksp = { id = &quot;com.google.devtools.ksp&quot;, version = &quot;2.0.21-1.0.28&quot; }&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>